<!DOCTYPE html><html>
<head>
	<link href="https://netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
	
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Marck+Script&display=swap" rel="stylesheet">

<link href="https://fonts.googleapis.com/css2?family=Homemade+Apple&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Crimson+Text&display=swap" rel="stylesheet">

	<style>:root{
	--yellow:#f0dfaf;
	--purple:#bfbdd0;
	--black:#3f3f3f;
	--white:#f0dfaf;
	--green:#7f9f7f;
	--grey:#4f4f4f;
	--orange:#dfaf8f;
	--red:#cc9393;
	--blue:#7cb8bb;
	--text-color:var(--black);
	--bg-color:var(--white);
	--accent-color:var(--violet);
	--max-page-width:65rem;
	--page-gutter:30px;
	--nav-height:50px;
}
html,body{
	font-size:16px;
	height:100%;
	margin:0px;
	font-family:'Crimson Text', serif;
	background-image:url(https://i.imgur.com/tJlmqZD.png);
}
h1,h2,h3,h4,h5{
	font-family:'Marck Script';
}
*{
	box-sizing:border-box;
}
a{
	color:var(--blue);
}
a:visited{
	color:var(--purple);
}
main section{
	position:relative;
	margin-right:max(calc((100% - var(--max-page-width))/2), var(--page-gutter));
	margin-left:max(calc((100% - var(--max-page-width))/2), var(--page-gutter));
	background-image:url(https://i.imgur.com/TtlLBDT.png);
	filter:sepia(20%);
}
nav{
	align-items:center;
	display:flex;
	justify-content:space-between;
	font-weight:bold;
	z-index:1000;
	position:relative;
	padding-right:max(calc((100% - var(--max-page-width))/2), var(--page-gutter));
	padding-left:max(calc((100% - var(--max-page-width))/2), var(--page-gutter));
	height:var(--nav-height);
	background-color:white;
	border-bottom:1px solid black;
}
nav>a{
	text-decoration:none;
	vertical-align:middle;
	display:flex;
	align-items:center;
	justify-content:center;
	font-size:2em;
	max-height:var(--nav-height);
	color:black;
}
nav>a:visited{
	color:black;
}
nav>a>img{
	max-height:var(--nav-height);
}
nav>ul{
	list-style:none;
	padding:0;
	margin:0;
	height:var(--nav-height);
	vertical-align:middle;
	display:block;
}
nav>ul>li{
	display:inline-block;
	margin:0 0.5rem;
	position:relative;
	text-align:left;
	height:var(--nav-height);
	line-height:var(--nav-height);
}
nav>ul>li a{
	color:var(--black);
	text-decoration:none;
	display:block;
	height:100%;
	border-bottom:0px solid var(--blue);
}
nav>ul>li a:hover{
	color:var(--blue);
	border-bottom:4px solid var(--blue);
}
nav>ul>li button{
	padding:8px 24px;
}
@media only screen and (max-width: 600px){
	nav{
		align-items:flex-start;
	}
}
@media only screen and (max-width: 600px){
	nav ul{
		text-align:right;
		visibility:hidden;
		height:fit-content;
	}
}
@media only screen and (max-width: 600px){
	nav ul li{
		display:block;
		background-color:white;
		padding:0px 10px;
	}
}
@media only screen and (max-width: 600px){
	nav ul:hover{
		visibility:visible;
	}
}
@media only screen and (max-width: 600px){
	nav ul::before{
		content:'☰';
		visibility:visible;
		font-size:2em;
	}
}
button{
	font-family:monospace;
	border:1px solid var(--green);
	cursor:pointer;
}
input[type='text']{
	border:1px solid var(--yellow);
	outline:none;
	padding:0.2em 0.3em;
	font-family:monospace;
	border-radius:3px;
}
input[type='text']:focus{
	border-color:var(--green);
}
.Sneakpeek{
	display:block;
	border-radius:10px;
	background-color:var(--grey);
}

section.Recipe{
	padding-top:2em;
}
section.Recipe.showNotes .note{
	display:block !important;
}
section.Recipe h1{
	font-size:3em;
	margin:0px;
}
section.Recipe h3{
	font-size:1.8em;
	margin:0px;
}
section.Recipe blockquote{
	margin-left:0px;
	border-left:3px solid var(--grey);
	padding-left:5px;
}
section.Recipe .info{
	display:flex;
	justify-content:space-between;
}
section.Recipe .info img{
	width:200px;
}
section.Recipe span.ingredient{
	border:1px solid var(--white);
}
section.Recipe .ingredientControl:hover{
	background-color:red;
}
section.Recipe .note{
	display:none;
	border:var(--green) 1px solid;
	border-radius:3px;
}
sup{
	font-size:1em;
	vertical-align:baseline;
	background-color:var(--white);
	padding:1px 3px;
	margin:2px 2px;
	border-radius:5px;
	text-decoration:none;
}
main nav>a{
	font-family:'Marck Script';
	color:black;
}
main nav>a:visited{
	color:black;
}</style>
	<script>window.css={};window.head={};</script>
</head>
<body><main></main></body>
<script>
if(typeof window !=='undefined') global=window;
global.__Modules = global.__Modules||{};
(function(){
	global.__Modules["-1entt4j"]={func:function(module, exports, global, __filename, __dirname, __root, require){const isObj = (obj)=>!!obj && (typeof obj == 'object' && obj.constructor == Object);
const isList = (obj)=>Array.isArray(obj) || isObj(obj);
const exe = (obj,...args)=>typeof obj === 'function' ? obj(...args) : obj;
const undef = (obj)=>typeof obj === 'undefined';
const hash = (str)=>[...str].reduce((acc, char)=>{acc = ((acc<<5)-acc)+char.charCodeAt(0);return acc&acc; }, 0).toString(32);

const isListSame = (a,b)=>{
	if(typeof a === 'undefined' || typeof b === 'undefined') return false;
	if(a===b) return true;
	if(!isList(a)||!isList(b)) return false;
	const A = Object.keys(a), B = Object.keys(b);
	if(A.length !== B.length) return false;
	return A.every(k=>a[k]===b[k]);
};
const fill = (arr, func)=>{
	let res = [];
	arr.map((val, idx)=>{
		if(!!val) res.push(val);
		if(idx != arr.length-1) res.push(func());
	})
	return res;
};

const isServerSide = typeof window === 'undefined';

Archive = (isServerSide ? global : window).Archive || {};

const DP = (typeof DOMParser !== 'undefined') ? new DOMParser() : null;
const PH = String.fromCharCode(7);

let xo = {ver: '0.4.1', debug : true};

xo.parser = (htmlString, id=false)=>{
	const body = DP.parseFromString(htmlString, 'text/html').body;
	if(body.children.length > 1) throw 'Multiple top level elements were returned in blueprint';
	let dom = body.children[0], slots = [];
	const insertSlots = (el)=>{
		const containsPlaceholder = el.nodeName == "#text" && el.nodeValue.indexOf(PH) !== -1;
		if(containsPlaceholder){
			el.replaceWith(...fill(el.nodeValue.trim().split(PH), xo.parser.createPlaceholder));
		}
		Array.from(el.childNodes||[]).map(cn=>insertSlots(cn));
	};
	const parseElement = (el, path=[])=>{
		if(el.nodeName == "#text" && el.nodeValue.trim() === PH){
			slots.push({ attr : 'content', path : path.slice(0,-1) });
			el.nodeValue='';
		}
		Array.from(el.attributes||[])
			.map(({name, value})=>{
				if(value.indexOf(PH) == -1) return;
				if(value !== PH) throw `Element attribute '${name}' is overloaded`;
				slots.push({ path, attr: name });
				el.removeAttribute(name);
			});
		Array.from(el.childNodes||[])
			.map((child, idx)=>parseElement(child, path.concat(idx)));
	};
	insertSlots(dom);
	parseElement(dom);
	if(xo.debug && id) dom.setAttribute('data-xo', id);
	return { slots, dom };
};

xo.parser.extract = (targetEl, path)=>path.reduce((el, idx)=>el.childNodes[idx], targetEl);
xo.parser.replace = (targetEl, node)=>{
	const newNode = node.cloneNode(true);
	targetEl.replaceWith(newNode);
	return newNode;
};
xo.parser.update = (targetEl, attr, data)=>{
	if(attr=='content'){
		targetEl[(targetEl.nodeName == '#text') ? 'nodeValue' : 'innerHTML']
			= (!data&&data!==0) ? '' : data;
	}else if(attr=='class'){
		targetEl.classList = data;
	}else if(typeof data === 'boolean'){
		targetEl.toggleAttribute(attr, data);
	}else{
		targetEl[attr] = data;
	}
	return targetEl;
};
xo.parser.createPlaceholder = ()=>{
	const slot = document.createElement('slot');
	slot.innerHTML = PH;
	return slot;
};


xo.x = (strings, ...data)=>{
	const str = Array.isArray(strings) ? strings.join(PH) : strings;
	const key = hash(str);
	if(!Archive[key]){
		Archive[key] = xo.parser(str, key);
		if(Archive[key].slots.length !== data.length){
			console.error({template: Archive[key], strings, data})
			throw `Blueprint ${key} has mismatch between data and slots. Probably an HTML issue`;
		}
	}
	return { type: 'bp', data, key, ...Archive[key] };
};
xo.comp = (func)=>{
	const key = hash(func.toString());
	return (...args)=>{ return { type: 'comp', func, args, key }};
};

const getType = (obj)=>{
	if(!obj) return 'data';
	if(obj.type=='bp'||obj.type=='comp'||obj.type=='list'||obj.type=='data') return obj.type;
	if(isList(obj)) return 'list';
	return 'data';
};

const runComponent = (comp, node)=>{
	let stateCounter=0,effectCounter=0;
	node.useState = (init)=>{
		let idx = stateCounter++;
		if(undef(node.states[idx])) node.states[idx] = exe(init);
		return [node.states[idx], (val, force=false)=>{
			if(node.states[idx] === val && !force) return;
			node.states[idx] = val;
			node.forceUpdate();
		}];
	};
	node.useAsync = (func, init)=>{
		const [pending, setPending] = node.useState(false);
		const [errors, setErrors] = node.useState(null);
		const [result, setResult] = node.useState(init);
		let res = (...args)=>{
			setPending(true);
			setErrors(null);
			return func(...args)
				.then((content)=>setResult(content))
				.catch((err)=>setErrors(err))
				.finally(()=>setPending(false))
		}
		res.pending=pending;
		res.errors=errors;
		res.result=result;
		return res;
	};
	node.useEffect=(func, args)=>{
		let idx = effectCounter++;
		if(!node.effects[idx]) node.effects[idx] = {};
		if(!isListSame(args, node.effects[idx].args)){
			exe(node.effects[idx].cleanup);
			node.effects[idx] = { func, args, flag : true };
		}
	};
	node.forceUpdate = ()=>{
		node.args = undefined;
		if(!node.throttle) node.throttle = setTimeout(()=>{node = render(comp, node)},0);
	};
	return comp.func.apply(node, comp.args);
};

const mount = (obj, node)=>{
	const type = getType(obj);
	node = { type, el : node.el, attr : node.attr||'content'};
	if(obj && obj.key) node.key = obj.key;

	if(type == 'bp'){
		node.el = xo.parser.replace(node.el, obj.dom);
		node.children = obj.slots.map(({path, attr})=>{
			return { el : xo.parser.extract(node.el, path), attr };
		});
	}
	if(type =='comp'){
		node.effects = []; node.states = []; node.refs = {};
		node.args = undefined;
		node.children = [{el : node.el}];
	}
	if(type=='list'){
		const onlyChildIsSlot = node.el.parentElement.childNodes.length == 1
		if(onlyChildIsSlot){
			node.el = node.el.parentElement;
			node.el.innerHTML = '';
		}else{
			node.el = xo.parser.replace(node.el, document.createElement('slot'));
		}
		node.children = {};
	}
	if(type=='data'){
		node.val = undefined;
		if(node.attr == 'content'){
			node.el = xo.parser.replace(node.el, document.createTextNode(''));
		}
	}
	return node;
};

const unmount = (node)=>{
	if(!node || !node.type) return node;
	if(node.effects) node.effects.map(({cleanup})=>exe(cleanup));
	if(node.children) Object.values(node.children).map(unmount);
	return {el:node.el, attr:node.attr};
};

const render = (obj, node)=>{
	const type = getType(obj);
	if(type !== node.type) node = mount(obj, unmount(node));

	if(type == 'data'){
		if(obj !== node.val){
			node.el = xo.parser.update(node.el, node.attr, obj);
			node.val = obj;
		}
	}
	if(type == 'bp'){
		if(obj.key !== node.key) node = mount(obj, unmount(node));
		obj.data.map((val, idx)=>{
			node.children[idx] = render(val, node.children[idx]);
		});
	}
	if(type == 'comp'){
		if(obj.key !== node.key) node = mount(obj, unmount(node));
		if(isListSame(obj.args, node.args)) return node;

		node.throttle = false;
		node.args = obj.args;
		node.children[0] = render(runComponent(obj, node), node.children[0]);
		node.el = node.children[0].el;

		node.effects.map((eff, idx)=>{
			if(eff.flag){
				node.effects[idx].flag = false;
				node.effects[idx].cleanup = eff.func();
			}
		});
	}
	if(type=='list'){
		Object.keys(node.children).map(key=>{
			if(!undef(obj[key])) return;
			unmount(node.children[key]);
			node.children[key].el.remove();
			Array.isArray(node.children) ? node.children.splice(key, 1) : delete node.children[key];
		});

		const newItems = Object.entries(obj);
		newItems.map((_item, _idx)=>{
			const reverse_idx = newItems.length - _idx - 1;
			const [key, val] = newItems[reverse_idx];
			const baseItem = node.children[key] || mount(val, {el : document.createElement('slot')});

			obj[key] = render(val, baseItem);

			if(node.el.childNodes[reverse_idx] !== obj[key].el){
				const nextSibling = newItems[reverse_idx + 1];
				const targetEl = nextSibling ? obj[nextSibling[0]].el : null;
				node.el.insertBefore(obj[key].el, targetEl);
			}
		});
		node.children = obj;
	}
	return node;
};

xo.render = (targetEl, obj, tree)=>render(obj, tree || { el : targetEl, attr: 'content' });


/* Utils */
xo.cx = (...args)=>{
	return args.map((arg)=>{
		if(Array.isArray(arg)) return xo.cx(...arg);
		if(isObj(arg)) return Object.entries(arg).filter(([k,v])=>!!v).map(([k,v])=>k).join(' ');
		return arg;
	}).join(' ');
};
xo.keymap = (arr, fn)=>Object.fromEntries(Object.entries(arr).map(([k,v])=>fn(v,k)));

if(isServerSide){
	xo.x = (strings, ...data)=>{return {type:'bp', strings, data}};
	xo.render = (obj)=>{
		if(obj && obj.type=='bp'){
			if(Array.isArray(obj.strings)) return obj.strings.reduce((acc,str,idx)=>acc+str+xo.render(obj.data[idx]||''),'');
			return obj.strings;
		}
		if(isList(obj)) return Object.values(obj).map(xo.render).join('\n');
		if(typeof obj == 'function') return '';
		return obj;
	};
	xo.comp = (func)=>{
		return func.bind({
			useState    : (init)=>{return [exe(init),()=>{}]},
			useEffect   : (func)=>null,
			useAsync    : (func, init)=>{func.result=exe(init); return func;},
			forceUpdate : ()=>{},
			refs : {}
		})
	}
}

if(typeof window !== 'undefined') window.xo = xo;
if(typeof module !== 'undefined') module.exports = xo;
},deps:{},fn:'libs/xo.js',dn:'libs', root:'..'};
global.__Modules["1kivi2a"]={func:function(module, exports, global, __filename, __dirname, __root, require){if (!String.prototype.replaceAll) String.prototype.replaceAll = function(str, newStr){ return this.replace(new RegExp(str, 'g'), newStr) };

const weave = (a1, a2)=>a2.reduce((acc,a,idx)=>acc.concat(a1[idx], a),[]).concat(a1[a1.length-1]);
const tag = (input, vals)=>(Array.isArray(input)) ? weave(input, vals).join('') : input;
const noop = ()=>{};

const picoparse = (rules, text)=>{
	let remaining = text, result = [], skip=false, pos=0;
	while(remaining.length > 0){
		let match = rules.reduce((best, [rgx, fn])=>{
			let match = rgx.exec(remaining);
			if(!match) return best;
			if(!best || match.index < best.index){ match.func = fn; return match; }
			return best;
		}, false);
		if(!match) break;
		const [text, ...groups] = match;
		pos += match.index;
		const res = match.func(groups, {text, pos, pre:remaining.substring(0,match.index)})
		if(typeof res == 'boolean'){ skip = res; }
		else if(!skip && res){ result.push(res); }
		remaining = remaining.substring(match.index + text.length);
	}
	return result;
};

const convertKeys = (keys)=>{
	let media;
	return {
		sel : keys.reduce((acc,key)=>{
			if(key.startsWith('@media')){
				media=key;
				return acc;
			}
			return acc.flatMap(sublist=>key.split(',').map(subkey=>sublist.concat(subkey)))
		},[[]])
			.map(arr=>arr.join(' ').replaceAll(' &', '').replaceAll(' :', ':'))
			.join(','),
		media
	}
};

const parse = (str)=>{
	const parsed = picoparse([
		[/\/\*(\*(?!\/)|[^*])*\*\//, ()=>null],
		[/\s*\/\/.*/,                ()=>null],
		[/([^{};\s][^{};]*){/,       ([selector])=>['selc', selector.trim()]],
		[/([\w+-]+)\s*:\s*([^;]+);/, ([key, val])=>['rule', key, val]],
		[/}/,                        ()=>['close']],
	], str);

	let keys = [];
	return parsed.reduce((acc,[type, key, val])=>{
		if(type=='selc') keys.push(key);
		if(type=='close') keys.pop();
		if(type=='rule'){
			const {sel, media} = convertKeys(keys);
			const last = acc[acc.length-1]||{};
			if(sel!=last.sel || media!=last.media){
				acc.push({sel,media,rules:{}});
			}
			if(val.indexOf('}')!==-1 || (val.indexOf(':')!==-1 && val.indexOf('\n')!==-1)){ //
				throw new Error(`ERR: CSS parsing error near: ${sel} -> ${key}. ${val}`);
			}
			acc[acc.length-1].rules[key] = val;
		}
		return acc;
	}, [])
};

const toString = (selectorList)=>{
	return selectorList.map(({sel, media, rules})=>{
		let res = [], buf=media?'\t':'';
		if(media) res.push(media+'{');
		if(sel) res.push(buf+sel+'{');
		Object.entries(rules).map(([k,v])=>res.push(`${buf}\t${k}:${v};`))
		if(sel) res.push(buf+'}');
		if(media) res.push('}');
		return res.join('\n')
	}).join('\n')
}

const css = (input, ...vals)=>toString(parse(tag(input, vals)));

css.parse    = parse;
css.tag      = tag;
css.toString = toString;
css.inject   = (input, ...vals)=>document.head.insertAdjacentHTML('beforeend', `<style>${css(input, ...vals)}</style>`);
css.style    = (typeof window !== 'undefined') ? noop : (input, ...vals)=>`<style>${css(input, ...vals)}</style>`;

module.exports = css;
},deps:{},fn:'libs/pico-css.js',dn:'libs', root:'..'};
global.__Modules["pn3b10"]={func:function(module, exports, global, __filename, __dirname, __root, require){const qs = {
	get : (url)=>Object.fromEntries((url.split('?')[1]||'').split('&').map((c) => c.trim().split('=').map(decodeURIComponent))),
	set : (url, obj)=>url.split('?')[0] + '?' + Object.entries(obj).map(([v,k])=>`${k}=${encodeURIComponent(v)}`).join('&'),
	add : (url, obj)=>qs.set(url, {...qs.get(url, obj), ...obj}),
};

const cookies = {
	get : ()=>Object.fromEntries(document.cookie.split(';').map((c) => c.trim().split('=').map(decodeURIComponent))),
	set : (name, val, opts={})=>document.cookie = `${name}=${val}; ${Object.entries(opts).map(([v,k])=>`${k}=${v}`).join('; ')}`,
	del : (name)=>document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC;`,
};

const request = async (method, url, data={}, options={})=>{
	const {headers, ...opts}=options;
	if(method=='GET') url = qs.add(url, data);
	return fetch(url, {
		method, headers: {'Content-Type':'application/json', ...headers},
		body : method!='GET' ? JSON.stringify(data) : undefined,
		...opts,
	}).then(res=>{
		return res.text().then(data=>{
			try{res.data=JSON.parse(data);}catch(err){res.data=data;}
			if(!res.ok) throw res;
			return res;
		})
	});
};
request.get  = request.bind(null, 'GET');
request.post = request.bind(null, 'POST');
request.del  = request.bind(null, 'DELETE');
request.put  = request.bind(null, 'PUT');


const useLocalState = (scope, key, init)=>{
	const [val, setVal] = scope.useState(()=>{
		try{ return JSON.parse(window.localStorage.getItem(key)) ?? init;
		}catch(err){ return init; }
	});
	return [val, (newVal)=>{
		try{ window.localStorage.setItem(key, JSON.stringify(newVal)); } catch (err){}
		setVal(newVal);
	}];
};

const wait = async (n,val)=>new Promise((r)=>setTimeout(()=>r(val), n));



module.exports = { qs, cookies, request, useLocalState, wait };
},deps:{},fn:'libs/utils.js',dn:'libs', root:'..'};
global.__Modules["7l66sp"]={func:function(module, exports, global, __filename, __dirname, __root, require){const css = require('../libs/pico-css');

global.head.base_fonts = `
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Marck+Script&display=swap" rel="stylesheet">

<link href="https://fonts.googleapis.com/css2?family=Homemade+Apple&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Crimson+Text&display=swap" rel="stylesheet">
`;

const Regal = 'https://i.imgur.com/tJlmqZD.png';
const Fibers = 'https://i.imgur.com/TtlLBDT.png';

module.exports = css`


	:root{
		--yellow : #f0dfaf;
		--purple : #bfbdd0;
		--black  : #3f3f3f;
		--white  : #f0dfaf;
		--green  : #7f9f7f;
		--grey   : #4f4f4f;
		--orange : #dfaf8f;
		--red    : #cc9393;
		--blue   : #7cb8bb;

		--text-color   : var(--black);
		--bg-color     : var(--white);
		--accent-color : var(--violet);

		--max-page-width  : 65rem;
		--page-gutter     : 30px;
		--nav-height      : 50px;
	}
	html,body{
		font-size   : 16px;
		height      : 100%;
		margin      : 0px;
		font-family: 'Crimson Text', serif;

		background-image: url(${Regal});
	}

	h1,h2,h3,h4,h5{
		font-family: 'Marck Script';
		//font-family: 'Homemade Apple', cursive;
	}

	*{
		box-sizing: border-box;
	}

	a{
		color: var(--blue);
		&:visited { color: var(--purple); }
	}

	main section{
		position: relative;
		margin-right: max(calc((100% - var(--max-page-width))/2), var(--page-gutter));
		margin-left: max(calc((100% - var(--max-page-width))/2), var(--page-gutter));

		background-image: url(${Fibers});
		filter: sepia(20%);
	}

	nav{
		align-items: center;
		display: flex;
		justify-content: space-between;
		font-weight: bold;
		z-index: 1000;

		position: relative;
		padding-right: max(calc((100% - var(--max-page-width))/2), var(--page-gutter));
		padding-left: max(calc((100% - var(--max-page-width))/2), var(--page-gutter));
		height: var(--nav-height);
		background-color: white;
		border-bottom: 1px solid black;

		&>a{
			text-decoration: none;
			vertical-align: middle;
			display: flex;
			align-items: center;
			justify-content: center;
			font-size: 2em;
			max-height: var(--nav-height);
			color: black;
			&:visited{ color: black; }
			&>img{
				max-height: var(--nav-height);
			}
		}

		&>ul{
			list-style: none;
			padding: 0;
			margin: 0;
			height: var(--nav-height);
			vertical-align: middle;
			display: block;
			&>li{
				display: inline-block;
				margin: 0 0.5rem;
				position: relative;
				text-align: left;
				height: var(--nav-height);
				line-height: var(--nav-height);

				a{
					color: var(--black);
					text-decoration: none;
					display: block;
					height: 100%;
					border-bottom: 0px solid var(--blue);
					&:hover{
						color: var(--blue);
						border-bottom: 4px solid var(--blue);
					}
				}
				button{
					padding: 8px 24px;
				}
			}
		}

		@media only screen and (max-width: 600px){
			align-items: flex-start;
			ul{
				text-align: right;
				visibility: hidden;
				height: fit-content;
			}
			ul li{
				display: block;
				background-color: white;
				padding: 0px 10px;
			}
			ul:hover{
				visibility: visible;
			}
			ul::before{
				content: '☰';
				visibility: visible;
				font-size: 2em;
			}
		}
	}

	button{
		font-family: monospace;
		border: 1px solid var(--green);
		cursor: pointer;
	}

	input[type='text']{
		border        : 1px solid var(--yellow);
		outline       : none;
		padding       : 0.2em 0.3em;
		font-family   : monospace;
		border-radius : 3px;

		&:focus{
			border-color: var(--green);
		}
	}



`;
},deps:{"../libs/pico-css":"1kivi2a"},fn:'client/style.js',dn:'client', root:'..'};
global.__Modules["1pd6qi0"]={func:function(module, exports, global, __filename, __dirname, __root, require){const {x, comp, cx} = require('../libs/xo.js');
const css = require('../libs/pico-css.js');




global.css.sneakpeek = css`
	.Sneakpeek{
		display: block;
		border-radius: 10px;

		background-color: var(--grey);

	}

`;

const Sneakpeek = (recipe)=>{


	return x`<a href=${`?recipe=${recipe.id}`} class='Sneakpeek'>
		<h3>${recipe.title}</h3>

	</a>`
}


module.exports = Sneakpeek
},deps:{"../libs/xo.js":"-1entt4j","../libs/pico-css.js":"1kivi2a"},fn:'client/sneakpeek.js',dn:'client', root:'..'};
global.__Modules["3lb9p3"]={func:function(module, exports, global, __filename, __dirname, __root, require){const {x, comp, cx} = require('../libs/xo.js');
const css = require('../libs/pico-css.js');

const Sneakpeek = require('./sneakpeek.js');


const updateURL = (query)=>{
	if(history.pushState) {
		var newurl = window.location.protocol + "//" + window.location.host + window.location.pathname + query
		window.history.pushState({path:newurl},'',newurl);
	}
	//window.location.search = encodeURI(query);
};

const has = (str, key)=>(str||"").toLowerCase().indexOf(key) !== -1;



global.css.search_page = css`
	.Search{

	}
`



const filterRecipes = (recipes, query)=>{
	if(!query.trim()) return Object.values(recipes);

	const parts = query.toLowerCase().split(' ').reduce((acc,part)=>{
		if(part.indexOf(':')){
			const [key,val] = part.split(':');
			acc[key] = val;
		}else{
			acc.terms.push(part);
		}
		return acc;
	}, {terms:[]});


	console.log(parts)
	return Object.values(recipes).filter(recipe=>{

		if(parts.type && recipe.type == parts.type) return true;
		if(parts.chef && recipe.chef == parts.chef) return true;


		if(parts.terms.length==0) return false;
		return parts.terms.every(term=>{
			if(has(recipe.title, term)) return true;
			if(has(recipe.desc, term)) return true;

			return false;
		})
	});
}


const SearchPage = comp(function(allRecipes, initQuery){
	const [query, setQuery] = this.useState(initQuery);
	const [inProgress, setInProgress] = this.useState(false);


	const [recipes, setRecipes] = this.useState(()=>filterRecipes(allRecipes, query));



	this.useEffect(()=>{
		setInProgress(true);
		clearTimeout(this.refs.timeout);
		this.refs.timeout = setTimeout(()=>{
			setRecipes(filterRecipes(allRecipes, query));
			setInProgress(false);
			updateURL(query ? `?search=${encodeURI(query)}`: '?');
		}, 150);
	}, [query])



	return x`<section class='Search'>

		<input type='text' value=${query} oninput=${(evt)=>setQuery(evt.target.value)}></input>

		${inProgress}

		${Object.values(recipes).map(Sneakpeek)}
	</section>`
});

module.exports = SearchPage;

},deps:{"../libs/xo.js":"-1entt4j","../libs/pico-css.js":"1kivi2a","./sneakpeek.js":"1pd6qi0"},fn:'client/search.page.js',dn:'client', root:'..'};
global.__Modules["1reul1s"]={func:function(module, exports, global, __filename, __dirname, __root, require){const volume = {
	cup   : {
		cup   : 1,
		ml    : 236.6,
		tsp   : 48,
		tbsp  : 16,
		floz  : 8,
		pint  : 0.5,
		quart : 0.25,
		liter : 0.2366
	},
	ml : {

	},
	tsp   : {
		cup   : 1,
		ml    : 1,
		tsp   : 1,
		tbsp  : 1,
		floz  : 1,
		pint  : 1,
		quart : 1,
		liter : 1,
	},
	tbsp  : {

	},
	floz    : {

	},
	pint  : {

	},
	quart : {

	},
	liter : {

	},
};
const weight = {
	gram : {
		gram : 1,
		lb : 1,
		oz : 1
	},
	lb : {
		gram : 1,
		lb : 1,
		oz : 1
	},
	oz : {
		gram : 1,
		lb : 1,
		oz : 1
	}
};
const useFractions = {
	cup : true,
	tsp : true,
	tbsp : true,
	oz : true,
	pint : true,
	quart : true,
};
const alias = {
	'fl oz'       : 'floz',
	'fl. oz.'     : 'floz',
	'oz. fl.'     : 'floz',
	'fl.oz.'      : 'floz',
	'oz.fl.'      : 'floz',
	'fluid ounce' : 'floz',
	qt            : 'quart',
	teaspoon      : 'tsp',
	tablespoon    : 'tbsp',
	l             : 'liter',
	litre         : 'liter',
	millilitre    : 'ml',
	milliliter    : 'ml',
	pound         : 'lb',
	g             : 'gram',
	onuce         : 'oz',
};


const toFraction = (val)=>{
	let scalar = Math.floor(val);
	let [frac] = Object.entries({'zero':0,'⅛':1/8,'¼':1/4,'⅜':3/8,'½':1/2,'⅝':5/8,'¾':3/4,'⅞':7/8,'one':1})
		.reduce((acc, [str, num])=>{
			const delta = Math.pow(val - scalar - num, 2);
			if(delta < acc[1]) return [str, delta];
			return acc;
		}, ['one', 1]);
	if(frac == 'one'){ frac = false; scalar += 1}
	if(frac == 'zero'){ frac = false; }
	return `${scalar || ''}${frac || ''}`.trim();
};



//Take a raw string of quantity and/or unit and returns the normalized unit
// and numerical quantity, even expressed as fraction
const parse = (raw)=>{
	let qty=0, unit;
	raw.split(' ').map(p=>{
		const [num]= p.match(/\d*\.?\d+/) || [];
		const [frac] = p.match(/\d+\/\d+/) || [];
		const [_unit] = p.match(/[a-zA-Z]+/) || [];

		if(frac){
			const [a,b] = frac.split('/');
			qty += Number(a)/Number(b)
		}else if(num){
			qty += Number(num)
		}
		if(_unit){
			const name = _unit.toLowerCase().replace(/s$/, '');
			if(weight[name] || volume[name]){
				unit = name;
			}else{
				unit = alias[_unit.toLowerCase().replace(/s$/, '')] || _unit.toLowerCase();
			}
		}
	})
	return {qty, unit};
};

// Converts a value from one unit to another, including converting to fraction notation
const convert = (val, from_unit, to_unit)=>{
	if(volume[from_unit] && volume[from_unit][to_unit]){
		val = volume[from_unit][to_unit] * val;
	}
	if(weight[from_unit] && weight[from_unit][to_unit]){
		val = weight[from_unit][to_unit] * val;
	}
	if(useFractions[to_unit]) val = toFraction(val);
	if(typeof val == 'number' && val !== Math.floor(val)) val = val.toFixed(1);

	return val;
}

module.exports = {
	parse,
	convert,
	weight,
	volume
}
},deps:{},fn:'client/units.js',dn:'client', root:'..'};
global.__Modules["uj70co"]={func:function(module, exports, global, __filename, __dirname, __root, require){const {x, comp, cx} = require('../libs/xo.js');
const css = require('../libs/pico-css.js');



global.css.recipe_page = css`
	section.Recipe{
		padding-top: 2em;

		&.showNotes{
			.note{
				display: block !important;
			}
		}

		h1{
			font-size: 3em;
			margin: 0px;
		}
		h3{
			font-size: 1.8em;
			margin: 0px;
		}

		blockquote{
			margin-left: 0px;
			border-left: 3px solid var(--grey);
			padding-left: 5px;
		}

		.info{
			display: flex;
			justify-content: space-between;
			img{
				width : 200px;
			}
			blockquote{

			}


		}


		span.ingredient{
			border: 1px solid var(--white);
		}


		.ingredientControl{
			&:hover{
				background-color: red;
			}
		}

		.note{
			display: none;
			border: var(--green) 1px solid;
			border-radius: 3px;
		}

	}

	sup{
		font-size: 1em;
		vertical-align: baseline;
		background-color: var(--white);
		padding : 1px 3px;
		margin: 2px 2px;
		border-radius: 5px;
		text-decoration: none;
	}
	a sup{

	}

`;


const Emitter=()=>{
	let cache={};
	return {
		emit : (evt, ...args)=>(cache[evt]||[]).map(fn=>fn(...args)),
		on : (evt, func)=>{
			cache[evt]=(cache[evt]||[]).concat(func);
			return ()=>cache[evt]=cache[evt].filter(x=>x!=func);
		}
	};
};



const Units = require('./units.js');


const IngredientControl = comp(function(ingredient, initServings=1){
	const [unit, setUnit] = this.useState(ingredient.unit);

	const [servings, setServings] = this.useState(initServings);
	if(!this.refs.baseServings) this.refs.baseServings = initServings;
	this.useEffect(()=>{
		return ServeringsEmitter.on('servingsChange', (newServings)=>{
			setServings(newServings)
		})
	},[]);

	let qty = ingredient.qty || '';
	if(qty){
		qty = Units.convert(qty * servings/this.refs.baseServings, ingredient.unit, unit) ;
	}

	return x`<span class='ingredientControl'>
		${qty && qty}

		${Units.volume[unit] && x`<select value=${unit} onchange=${(evt)=>setUnit(evt.target.value)}>
			${Object.keys(Units.volume).map(key=>x`<option value=${key} selected=${key==unit}>${key}</option>`)}
		</select>`}
		${Units.weight[unit] && x`<select value=${unit} onchange=${(evt)=>setUnit(evt.target.value)}>
			${Object.keys(Units.weight).map(key=>x`<option value=${key} selected=${key==unit}>${key}</option>`)}
		</select>`}
		${!Units.volume[unit] && !Units.weight[unit] && x`<span>${unit} </span>`}

		<strong>${ingredient.name}</strong>
	</span>`
});


const ServeringsEmitter = Emitter();


const Tidbit = (label, val, link)=>{
	if(!val) return;
	if(link){
		return x`<div class='field'>
			<label>${label}:</label>
			<a href=${link}><sup>${val}</sup></a>
		</div>`
	}
	return x`<div class='field'>
		<label>${label}:</label>
		<sup>${val}</sup>
	</div>`
}


const RecipePage = comp(function(recipe){
	if(!recipe) return x`<section class='Recipe'>Oops, recipe not found</section>`;

	const [servings, setServings] = this.useState(recipe.servings);
	const [showNotes, setShowNotes] = this.useState(false);

	this.useEffect(()=>{
		[...document.querySelectorAll('.ingredient')].map((el)=>{
			xo.render(el, IngredientControl({
				name  : el.getAttribute('x-name'),
				qty   : Number(el.getAttribute('x-qty')),
				unit  : el.getAttribute('x-unit')
			}, recipe.servings));
		});
	}, []);

	this.useEffect(()=>{
		ServeringsEmitter.emit('servingsChange', servings)
	},[servings])

	return x`<section class=${cx('Recipe', {showNotes})}>
		<div class='top'>
			<h1>${recipe.title}</h1>
			${recipe.desc && x`<blockquote>${recipe.desc}</blockquote>`}
			<div class='info'>
				<div>
					${Tidbit('Chef', recipe.chef, `?search=chef:${recipe.chef}`)}
					${Tidbit('Type', recipe.type, `?search=type:${recipe.type}`)}
					${recipe.tags && recipe.tags.length && x`<div class='field'>
						<label>Tags:</label>
						${recipe.tags.map((tag)=>x`<a href=${`?search=${tag}`}><sup>${tag}</sup></a>`)}
					</div>`}
				</div>
				<div>
					${Tidbit('Prep Time', recipe.prep_time)}
					${Tidbit('Cook Time', recipe.cook_time)}
					${Tidbit('Edit', 'Link to Github', recipe.github)}

					<label>
						<input type='checkbox' checked=${showNotes} onclick=${()=>setShowNotes(!showNotes)}></input>
						Show Notes
					</label>
				</div>
				<div>
					${recipe.img && x`<img src=${recipe.img}></img>`}
				</div>
			</div>
		</div>


		<hr />

		<h3>Ingredients</h3>
		<ul>
			${recipe.ingredients.map((ingredient)=>{
				return x`<li>${IngredientControl(ingredient, servings)}</li>`;
			})}
		</ul>

		<hr />

		<h3>Instructions</h3>
		<div class='servings'>
			<label>Number of Servings:</label>
			<span>${servings}<span>
			<button onclick=${()=>setServings(servings+1)}>+</button>
			<button onclick=${()=>setServings(servings-1)}>-</button>
		</div>
		${x(recipe.content)}
	</section>`
});

module.exports = RecipePage;

},deps:{"../libs/xo.js":"-1entt4j","../libs/pico-css.js":"1kivi2a","./units.js":"1reul1s"},fn:'client/recipe.page.js',dn:'client', root:'..'};
global.__Modules["17frcjq"]={func:function(module, exports, global, __filename, __dirname, __root, require){const {x, comp, cx} = require('../libs/xo.js');
const css = require('../libs/pico-css.js');

const utils = require('../libs/utils.js');

global.css.style = require('./style.js');


const SearchPage = require('./search.page.js');
const RecipePage = require('./recipe.page.js');

global.css.main_page = css`
	main{
		nav{
			&>a{
				font-family: 'Marck Script';
				color: black;
				&:visited{ color: black; }
			}
		}


	}
`;


const Main = comp(function({ recipes, chefs, tags, types }){
	const [{page, val}] = this.useState(()=>{
		if(typeof document !== 'undefined'){
			const params = utils.qs.get(document.location.href);
			if(params.search) return {page: 'search', val: params.search};
			if(params.recipe) return {page: 'recipe', val: params.recipe};
			return {page: 'search', val: ''};
		}
		return {page: 'search', val: ''};
	});

	console.log({chefs, tags, types});


	return x`<main>
		<nav>
			<a href='?'>Tastebase</a>
			<ul>
				<li><a href='?search='>Search</a></li>
				<li><a href='?search='>Add Recipe</a></li>
				<li><a href='?search='>Github</a></li>
				<li><a href='?search='>About</a></li>
			</ul>
		</nav>

		${page == 'search' && SearchPage(recipes, val)}
		${page == 'recipe' && RecipePage(recipes[val])}

		<footer></footer>
	</main>`;
});


module.exports = Main;
},deps:{"../libs/xo.js":"-1entt4j","../libs/pico-css.js":"1kivi2a","../libs/utils.js":"pn3b10","./style.js":"7l66sp","./search.page.js":"3lb9p3","./recipe.page.js":"uj70co"},fn:'client/main.js',dn:'client', root:'..'};
	const req = (id)=>{
		const mod = global.__Modules[id];
		if(mod.executed) return mod.export;
		let m = {exports : {}};
		mod.func(m,m.exports,global,mod.fn,mod.dn,mod.root,(reqPath)=>req(mod.deps[reqPath]));
		mod.executed = true;
		mod.export = m.exports;
		return mod.export;
	}
	if(typeof module === 'undefined'){
		global['main'] = req('17frcjq');
	}else{
		module.exports = req('17frcjq');
	}
})();</script>
<script>xo.render(document.body.children[0], window.main({"recipes":{"scoot__golden_milk":{"id":"scoot__golden_milk","github":"https://github.com/stolksdorf/tastebase/recipes/scoot/golden_milk.md","title":"Golden Milk","desc":"A cozy turmeric latte","servings":1,"tags":["turmeric","spice","amazing"],"type":"drink","link":false,"chef":"scoot","img":"https://images.media-allrecipes.com/userphotos/960x960/4543554.jpg","cook_time":false,"prep_time":false,"content":"<div class='instructions'><ol>\n<li>Gather your spice mix</li>\n</ol>\n<ul>\n<li>@ground tumeric<span class='ingredient' x-qty='0' x-unit='' x-name='1/2 tsp'>1/2 tsp</span></li>\n<li>@ground turmeric<span class='ingredient' x-qty='0' x-unit='' x-name='1/2 tsp'>1/2 tsp</span></li>\n<li>@cinnamon<span class='ingredient' x-qty='0' x-unit='' x-name='1/4 tsp'>1/4 tsp</span></li>\n<li>@ground ginger<span class='ingredient' x-qty='0' x-unit='' x-name='1/8 tsp'>1/8 tsp</span></li>\n<li>@cardamom powder<span class='ingredient' x-qty='0' x-unit='' x-name='1/8 tsp'>1/8 tsp</span></li>\n<li>@black pepper<span class='ingredient' x-qty='0' x-unit='' x-name='pinch'>pinch</span></li>\n<li>@honey<span class='ingredient' x-qty='0' x-unit='' x-name='1 tsp'>1 tsp</span> (for taste)</li>\n</ul>\n<p><span class='ingredient' x-qty='1' x-unit='tsp' x-name='honey'>1 tsp honey</span>\n<span class='ingredient' x-qty='0' x-unit='pinch' x-name='black pepper'>pinch black pepper</span></p>\n<p><span class='ingredient' x-qty='0' x-unit='' x-name='salt'>salt</span></p>\n<ol>\n<li>Heat @milk<span class='ingredient' x-qty='0' x-unit='' x-name='1 cup'>1 cup</span> in smol pot on low-med heat for 5min (until ~70C)</li>\n<li>Mix in your spice mix, stir thoroughly</li>\n<li>Run through a tea strainer to remove the large grains</li>\n<li>Don&#39;t drink the last mouthful, as it will have residue</li>\n</ol>\n<p><em>Spice ratio for making large batches</em></p>\n<p>4 tumeric : 2 cinnamon : 1 ginger : 1 cardamom</p>\n</div>","ingredients":[{"name":"1/2 tsp","qty":0,"unit":"","amount":""},{"name":"1/2 tsp","qty":0,"unit":"","amount":""},{"name":"1/4 tsp","qty":0,"unit":"","amount":""},{"name":"1/8 tsp","qty":0,"unit":"","amount":""},{"name":"1/8 tsp","qty":0,"unit":"","amount":""},{"name":"pinch","qty":0,"unit":"","amount":""},{"name":"1 tsp","qty":0,"unit":"","amount":""},{"name":"honey","qty":1,"unit":"tsp","amount":"1 tsp"},{"name":"black pepper","qty":0,"unit":"pinch","amount":"pinch"},{"name":"salt","qty":0,"unit":"","amount":""},{"name":"1 cup","qty":0,"unit":"","amount":""}]},"scoot__test.recipe":{"id":"scoot__test.recipe","github":"https://github.com/stolksdorf/tastebase/recipes/scoot/test.recipe.md","title":"Test Recipe","desc":"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.","servings":3,"tags":["test","fun","simple"],"type":"snack","link":false,"chef":"Unknown","img":"https://www.sbs.com.au/food/sites/sbs.com.au.food/files/bhtv_ep5_shakshuka11_0.jpg","cook_time":"30min","prep_time":"3min","content":"<div class='instructions'><ol>\n<li>git <span class='ingredient' x-qty='2' x-unit='slices' x-name='white bread'>2 slices white bread</span> 4cups <span class='temperature'>48c  <small>(118.4°F)</small></span>fo</li>\n<li>grab <span class='ingredient' x-qty='0' x-unit='' x-name='jam'>jam</span> and <span class='ingredient' x-qty='0' x-unit='' x-name='peanut butter'>peanut butter</span></li>\n<li>(Optional) Sprinkle <span class='ingredient' x-qty='0.5' x-unit='tsp' x-name='cinnamon'>1/2tsp cinnamon</span> on top\n<span class='note'>1. This instruction should not be shown</li></span>\n<li>Do not use <span class='ingredient' x-qty='1.75' x-unit='cup' x-name='flour'>1 3/4 cups flour</span> or <span class='ingredient' x-qty='0' x-unit='pinch' x-name='pepper'>a pinch pepper</span></li>\n<li>Don&#39;t heat oven to <span class='temperature'>400F  <small>(752.0°C)</small></span>or <span class='temperature'>123c  <small>(253.4°F)</small></span>or <span class='temperature'>30 celsius <small>(86.0°F)</small></span> or <span class='temperature'>45.5°C <small>(113.9°F)</small></span></li>\n<li>Slather and chomp</li>\n</ol>\n<p><span class='note'>\n    This is just some notes</p>\n<p></span></p>\n</div>","ingredients":[{"name":"white bread","qty":2,"unit":"slices","amount":"2 slices"},{"name":"jam","qty":0,"unit":"","amount":""},{"name":"peanut butter","qty":0,"unit":"","amount":""},{"name":"cinnamon","qty":0.5,"unit":"tsp","amount":"1/2tsp"},{"name":"flour","qty":1.75,"unit":"cup","amount":"1 3/4 cups"},{"name":"pepper","qty":0,"unit":"pinch","amount":"a pinch"}]}},"chefs":["scoot","Unknown"],"types":["drink","snack"],"tags":["turmeric","spice","amazing","test","fun","simple"]}));</script>
</html>